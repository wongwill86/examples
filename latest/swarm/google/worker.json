{{/*

Config for workers on Google

*/}}
{
    "Plugin": "google/compute",
    "Properties": {
        "NamePrefix": "{{ var `/cluster/name` }}-worker",
        "Network": "{{ var `/cluster/name` }}-network",
        "Tags": [
          "cluster-{{ var `/cluster/name` }}-network",
          "princeton-access",
          "http-server",
          "https-server"
        ],
        "Metadata": [
            {
              "key": "infrakit.clusterName",
              "value": "{{ var `/cluster/name` }}"
            },
            {
              "key": "infrakit.role",
              "value": "worker"
            }
        ],
        "MachineType": "{{ var `/cluster/instanceType/worker` }}",
        "Disks": [{
          "Boot": true,
          "SizeGb": 30,
          "Image": "https://www.googleapis.com/compute/v1/projects/ubuntu-os-cloud/global/images/ubuntu-1604-xenial-v20181204",
          "Type": "pd-standard"
        }],
        "Scopes": [
          "https://www.googleapis.com/auth/servicecontrol",
          "https://www.googleapis.com/auth/sqlservice.admin",
          "https://www.googleapis.com/auth/service.management.readonly",
          "https://www.googleapis.com/auth/logging.write",
          "https://www.googleapis.com/auth/monitoring.write",
          "https://www.googleapis.com/auth/trace.append",
          "https://www.googleapis.com/auth/devstorage.read_write",
          "https://www.googleapis.com/auth/cloud.useraccounts.readonly"
        ]
    }
}
